{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/city.service\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"@angular/common\";\n\nfunction HomeComponent_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const c_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", c_r2.unique_name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(c_r2.local_name);\n  }\n}\n\nfunction HomeComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 12);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const a_r3 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", a_r3.unique_name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(a_r3.local_name);\n  }\n}\n\nexport let HomeComponent = /*#__PURE__*/(() => {\n  class HomeComponent {\n    constructor(cityservice) {\n      this.cityservice = cityservice;\n      this.results = [];\n      this.Arrival = [];\n      this.today = Date.now();\n      this.travelForm = new FormGroup({\n        [\"departure\"]: new FormControl(\"\", [Validators.required]),\n        [\"arrival\"]: new FormControl(\"\", [Validators.required]),\n        [\"date\"]: new FormControl(\"\", [Validators.required]),\n        [\"hour\"]: new FormControl(\"\", [Validators.required])\n      });\n    }\n\n    ngOnInit() {\n      this.getPop();\n      this.adaptBCKGD();\n      console.log(document.getElementById('home').getAttribute('color'));\n    }\n\n    adaptBCKGD() {\n      document.getElementById('home').setAttribute('height', window.innerHeight + \"px\");\n      document.getElementById('home').setAttribute(\"color\", \"yellow\");\n    }\n\n    getPop() {\n      this.cityservice.getPop().subscribe(response => {\n        if (response.status === 200) {\n          this.results = response.body;\n        } else {\n          console.log(response.message);\n        }\n      });\n    }\n\n    search(x) {\n      this.cityservice.search(x.target.value).subscribe(response => {\n        if (response.status === 200) {\n          this.results = response.body;\n        } else {\n          console.log(response.message);\n        }\n      });\n    }\n\n    searchArrival(x) {\n      this.cityservice.search(x.target.value).subscribe(response => {\n        if (response.status === 200) {\n          this.Arrival = response.body;\n        } else {\n          console.log(response.message);\n        }\n      });\n    }\n\n    getPopArrival(event) {\n      if (event.target.value) {\n        let city = event.target.value;\n        this.cityservice.getPopArrival(city).subscribe(response => {\n          if (response.status === 200) {\n            this.Arrival = response.body;\n          } else {\n            console.log(response.message);\n          }\n        });\n      }\n    }\n\n    submit() {\n      console.log(this.results[0].local_name);\n      this.travelForm.setValue;\n      const dep = this.results[0].local_name;\n      const arr = this.Arrival[0].local_name;\n      const depVal = this.travelForm.get('departure').value;\n      const arrVal = this.travelForm.get('arrival').value;\n      const date = this.travelForm.get('date').value;\n      const hour = this.travelForm.get('hour').value;\n      this.cityservice.addTravel(dep, arr, date, hour, depVal, arrVal);\n    }\n\n  }\n\n  HomeComponent.ɵfac = function HomeComponent_Factory(t) {\n    return new (t || HomeComponent)(i0.ɵɵdirectiveInject(i1.CityService));\n  };\n\n  HomeComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: HomeComponent,\n    selectors: [[\"app-home\"]],\n    decls: 16,\n    vars: 8,\n    consts: [[\"id\", \"home\"], [1, \"searchBox\", 3, \"formGroup\", \"ngSubmit\"], [1, \"cities\"], [\"type\", \"text\", \"list\", \"departure\", \"placeholder\", \"D\\u00E9part\", \"formControlName\", \"departure\", 3, \"change\", \"keyup\"], [\"id\", \"departure\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"list\", \"popularArrival\", \"placeholder\", \"Arriv\\u00E9e\", \"formControlName\", \"arrival\", 3, \"keyup\"], [\"id\", \"popularArrival\"], [1, \"date\"], [\"type\", \"date\", \"formControlName\", \"date\", 3, \"min\"], [\"type\", \"time\", \"formControlName\", \"hour\"], [\"type\", \"submit\", 3, \"disabled\"], [3, \"value\"]],\n    template: function HomeComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"main\", 0);\n        i0.ɵɵelementStart(1, \"section\");\n        i0.ɵɵelementStart(2, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function HomeComponent_Template_form_ngSubmit_2_listener() {\n          return ctx.submit();\n        });\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"input\", 3);\n        i0.ɵɵlistener(\"change\", function HomeComponent_Template_input_change_4_listener($event) {\n          return ctx.getPopArrival($event);\n        })(\"keyup\", function HomeComponent_Template_input_keyup_4_listener($event) {\n          return ctx.search($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"datalist\", 4);\n        i0.ɵɵtemplate(6, HomeComponent_option_6_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"input\", 6);\n        i0.ɵɵlistener(\"keyup\", function HomeComponent_Template_input_keyup_7_listener($event) {\n          return ctx.searchArrival($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"datalist\", 7);\n        i0.ɵɵtemplate(9, HomeComponent_option_9_Template, 2, 2, \"option\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵelement(11, \"input\", 9);\n        i0.ɵɵpipe(12, \"date\");\n        i0.ɵɵelement(13, \"input\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"button\", 11);\n        i0.ɵɵtext(15, \"Validez pour voir les d\\u00E9tails\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"formGroup\", ctx.travelForm);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.results);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.Arrival);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"min\", i0.ɵɵpipeBind2(12, 5, ctx.today, \"yyyy-MM-dd\"));\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"disabled\", !ctx.travelForm.valid);\n      }\n    },\n    directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.DefaultValueAccessor, i2.NgControlStatus, i2.FormControlName, i3.NgForOf, i2.NgSelectOption, i2.ɵNgSelectMultipleOption],\n    pipes: [i3.DatePipe],\n    styles: [\".searchBox[_ngcontent-%COMP%]{margin:10%;height:200px;border-radius:20px;background-color:#dea78771;display:flex;flex-direction:column;justify-content:center;min-width:300px}.cities[_ngcontent-%COMP%], .date[_ngcontent-%COMP%]{text-align:center}section[_ngcontent-%COMP%]{width:40%}input[_ngcontent-%COMP%]{margin:15px auto;height:-moz-fit-content;height:fit-content;width:40%}button[_ngcontent-%COMP%]{width:80%;margin:10px auto}main[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;height:600px;background-image:url(glacier-express.1482135.w740.35b7f95a449d957d.jpg);background-repeat:no-repeat;background-size:cover}\"]\n  });\n  return HomeComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}